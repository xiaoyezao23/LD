# 产品需求文档（PRD）

## 一、项目背景与目标

### 1. 背景

本模块是“同德精卫”微信小程序中的一个健康自测功能子模块，聚焦于精神心理亚健康的早期识别与用户流程引导。

### 2. 目标

实现用户在微信小程序内使用 PHQ-9（抑郁）与 GAD-7（焦虑）两张量表进行自助健康自测，形成完整闭环流程：
“3分钟健康自测 → 自动评分 → 映射关注等级（绿/黄/橙/红）→ 下一步建议（自助/复评/预约/求助）”。

强调本模块仅用于辅助评估与流程引导，不替代医生的诊断与治疗。

---

## 二、功能范围（DEMO 版）

### ✅ 必须实现

- 量表选择页：展示 PHQ-9 与 GAD-7 两个量表供选择
- 量表作答流程：
  - 单题逐页展示，含进度条
  - 可返回上一题
  · 可随时结束自评
  - 提交答卷
- 自动评分与分层规则
- 结果页：
  - 显示关注等级（绿/黄/橙/红）
  - 关键结论摘要
  - 下一步建议（按钮）
  - 复评提醒设置
  - 自助调节内容推荐（芳香疗法、运动、放松训练等）
- 安全机制：PHQ-9 第9题分数 > 0，触发风险提示并置顶“求助”入口
- 数据留存（结构见后文）

### ❌ 不包含

- 不做诊断/处方/用药建议
- 不做多量表组合/AI对话采集
- 不实现医生端，仅保留字段接口

---

## 三、目标用户与使用场景

### 1. 用户类型

- 亚健康人群、有情绪困扰者
- 已在其他模块使用“AI问诊/康复”等服务的用户
- 高风险人群（重点是 PHQ-9 第9题触发者）

### 2. 使用场景与入口

- 首页卡片：「健康自测（3分钟）」
- 回流入口：来自 AI问诊页 / 康复首页 / 一键求助页

---

## 四、评分与关注等级规则

### 1. 评分标准

| 量表    | 题数 | 每题分值 | 总分范围  |
| ----- | -- | ---- | ----- |
| PHQ-9 | 9  | 0\~3 | 0\~27 |
| GAD-7 | 7  | 0\~3 | 0\~21 |

### 2. 分层标准及关注等级映射

| 量表    | 分数区间  | 等级     | 关注等级         |
| ----- | ----- | ------ | ------------ |
| PHQ-9 | 0–4   | 无抑郁症状  | 绿：低关注        |
| PHQ-9 | 5–9   | 轻度抑郁   | 黄：建议关注       |
| PHQ-9 | 10–14 | 中度抑郁   | 橙：建议进一步评估/门诊 |
| PHQ-9 | 15–27 | 中重度及以上 | 红：重点关注       |
| GAD-7 | 0–4   | 无焦虑症状  | 绿：低关注        |
| GAD-7 | 5–9   | 轻度焦虑   | 黄：建议关注       |
| GAD-7 | 10–14 | 中度焦虑   | 橙：建议进一步评估/门诊 |
| GAD-7 | 15–21 | 中重度焦虑  | 红：重点关注       |

### 3. 安全机制规则

- 若 PHQ-9 第9题得分 > 0，必须触发以下内容：
  - 在结果页置顶提示用户“检测到风险信号，请考虑尽快联系专业人员”
  - 提供“一键求助 / 预约门诊 / 热线电话”等按钮

---

## 五、页面与交互说明

### 页面清单及字段说明

#### 1. 首页入口卡片

- **文案标题**：健康自测（3分钟）
- **副标题**：快速了解您的情绪状态
- **按钮**：立即开始
- **免责声明**：仅用于辅助评估与流程引导，不替代医生诊疗决策

#### 2. 量表选择页

- **选项卡片**：
  - PHQ-9 抑郁自评量表
  - GAD-7 焦虑自评量表
- **说明文字**：
  - 每张量表约需3分钟作答
  - 自动计算评分，提供建议方向

#### 3. 量表作答页

- **题目逐页展示**：
  - 单题 + 四个选项（0\~3分）
  - 进度条（第x/总题数）
  - 返回上一题、保存草稿、提交答卷按钮
- **免责声明**（底部）：仅用于辅助评估与流程引导，不替代医生诊疗决策

#### 4. 结果页

- **元素**：
  - 关注等级标签（绿/黄/橙/红）
  - 量表类型、总分、评估结论
  - 推荐动作按钮区（最多2个主按钮 + 2个辅助按钮）
  - 设置复评提醒（7天/14天）
  - 推荐自助调节内容（模块卡片）：芳香疗法、冥想呼吸、简易瑜伽、情绪日记等（占位页）
  - 安全提示（若触发）
- **免责声明**：仅用于辅助评估与流程引导，不替代医生诊疗决策

#### 5. 求助页（弹窗/跳转页）

- **弹窗提示**：
  - 检测到您可能需要进一步支持
  - 可联系专业人员获取帮助
- **按钮占位**：
  - 一键求助（跳转页）
  - 热线电话（占位）
  - 去预约门诊（跳转占位页）

---

## 六、规则与推荐动作表（含按钮功能说明）

| 关注等级 | 推荐动作1    | 推荐动作2     | 安全提示           | 是否设置复评 | 附加推荐内容 |
| ---- | -------- | --------- | -------------- | ------ | -------- |
| 绿    | 自助调适     | 设置复评（14天） | 否              | 可选     | 推荐身心放松内容（芳香、运动） |
| 黄    | 自助调适     | 去预约       | 否              | 建议     | 推荐冥想/简易运动 |
| 橙    | 去预约      | 设置复评（7天）  | 否              | 建议     | -        |
| 红    | 一键求助（置顶） | 去预约       | 是（若PHQ-9第9题>0） | 建议     | -        |

---

### 按钮功能定义表

| 按钮名称 | 出现条件 | 跳转页面（ID） | 跳转方式 | 功能描述 |
|----------|----------|----------|----------|
| 自助调适 | 关注等级为绿/黄 | pages/selfhelp/index | navigateTo | 提供放松训练、情绪管理等内容展示（静态卡片） |
| 设置复评提醒（7天/14天） | 任意等级，依据推荐 | 内部提醒逻辑 / pages/remind/setup | 组件内弹窗或授权弹框 | 提醒用户定期再次测评 |
| 去预约 | 黄/橙/红等级 | pages/appointment/index | navigateTo | 引导用户预约心理门诊或专科干预 |
| 一键求助 | 红等级，或PHQ-9第9题>0 | pages/help/index | navigateTo | 显示紧急求助提示，可跳转到热线或人工干预页 |

---

## 七、身心调节内容推荐模块（预留设计）

本模块当前以静态卡片形式展示，未来可扩展为可持续更新的“身心调节知识库”系统，支持内容的动态匹配与推荐。

### 1. 内容知识库字段建议（content_library）

| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | string | 内容唯一标识 |
| title | string | 展示标题，如“舒缓冥想3分钟” |
| type | enum | 内容类型：芳香疗法 / 呼吸训练 / 简易运动 / 情绪日记等 |
| tags | array<string> | 标签（可多选）：如“低关注适用”“放松”“焦虑缓解”等 |
| target_levels | array<string> | 适配关注等级（绿/黄/橙） |
| media_type | enum | 内容形式：图文 / 视频 / 音频 / 引导页 |
| url | string | 内容跳转链接（小程序页 / 外链） |
| is_active | boolean | 是否上架 |
| created_at | datetime | 创建时间 |

### 2. 推荐逻辑建议（初版规则）

- 根据用户测评结果的关注等级（score_level）匹配 target_levels 字段
- 一次最多展示 3 条内容，按标签优先级 + 更新时间排序
- 后期可扩展推荐策略：基于用户行为打分（点击/收藏/完成度）优化排序

### 3. 占位设计说明

- 当前 DEMO 阶段：推荐内容为静态配置（如芳香、冥想等卡片）
- 页面设计中需预留内容模块容器，支持后续动态读取内容库
- 埋点需记录用户点击推荐内容的行为日志（内容ID + 位置）

---

## 七、数据结构与埋点

### 1. 建议数据表

#### `assessment_record`

- id
- user_id
- scale_type（PHQ-9 / GAD-7）
- total_score
- score_level（绿/黄/橙/红）
- has_risk_flag（bool，第9题触发）
- created_at

#### `assessment_answer`（可选）

- record_id
- question_id
- score
- created_at

#### `user_action_log`

- user_id
- action_type（进入页、提交、点击按钮等）
- target（按钮/页面标识）
- timestamp

### 2. 埋点需求

- 用户进入量表页
- 每题作答及停留时长
- 提交量表答卷
- 结果页展示曝光
- 点击各按钮：自助调适、预约、复评设置、求助、自助内容推荐卡片
- 安全提示触发（PHQ-9第9题）

---

## 八、验收标准（DEMO 版本）

| 功能项    | 验收标准                                   |
| ------ | -------------------------------------- |
| 评分正确性  | PHQ-9/GAD-7 自动计算总分无误                   |
| 分层准确性  | 关注等级与得分区间匹配                            |
| 安全提示触发 | PHQ-9 第9题得分>0时显示提示与求助入口                |
| 动作跳转   | 结果页四类按钮可跳转到占位页                         |
| 数据导出   | 可后台导出 assessment_record 为 CSV（可为占位功能） |
| 内容推荐卡片 | 绿/黄用户看到自助调节内容推荐，点击后可跳转占位页            |

